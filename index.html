<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title></title>
	<link type="text/css" href="css/smoothness/jquery-ui-1.8.18.custom.css" rel="stylesheet" />	
	<script type="text/javascript" src="lib/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="lib/jquery-ui-1.8.18.custom.min.js"></script>
	<script type="text/javascript" src="lib/raphael-min.js"></script>
	<script type="text/javascript" src="lib/raphael-popup.js"></script>
	
	<!-- Load SP_data SP_info SP_ages -->
	<script type="text/javascript" src="data/SP-Shortlist.json"></script>
	<script type="text/javascript" src="data/SP-Info.json"></script>
	
	<script type="text/javascript" src="js/gene-layers.js"></script>
	<link type="text/css" href="css/atlas.css" rel="stylesheet" />	
</head>
<body>

<div id="graph"></div>

<script>
$(function () {

	// Select a gene
	var gene = SP_data[0];

	// Create a new chart
	var chart = Raphael("graph", 900, 650),
		genechart = [];
	
	// Iterate through the four ages
	$.each(SP_ages, function(index) {
	
		// Parse age levels
		var gdls = getLevelsForGene(gene[this.name]);
		if (!gdls) {
			this.layers.x_notapplicable = true;
		}
	
		// Add layer info
		$.each(this.layers, function() {
			this.i = SP_layers[this.n].t;
			if (gdls) {
				this.f = getGeneFillLevel(gdls[this.n]);
			}
		});
		
		// Create chart for this age
		genechart.push(
			chart.geneLayers(10 + (index * 160), 300, 120, 200, this.layers)
		);

	});

});
</script>
</body>
</html>
